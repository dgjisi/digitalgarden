---
{"dg-publish":true,"permalink":"/ccd/ccd-update/"}
---


---

## 2023-05-11 周四
- 加入LOGS日志，按月生成新文件
	- 打印加密狗或注册信息
	- 打印管理员登录信息
## 2023-05-06 周六
`版本号：V18_230506_1041`
- 关闭OK图片保存（需加一个按钮）

## 2023-04-28 周五
`版本号：V18_230428_1210`
- 优化OCR检测
## 2023-04-27 周四
`版本号：V18_230427_1446`
- 优化打开海康相机，自适应网络数据包

```
1.在创建完句柄之后使用MV_CC_OpenDevice接口函数来打开设备

2.检测数据包大小只适用于GigE网口相机

3.通过MV_CC_GetOptimalPacketSize接口函数获取最佳适应数据包大小

4.最后通过MV_CC_SetIntValue接口函数将最佳适应数据包大小值设置为nPacketSize的值。

[图片]

此接口常用于解决相机断电重启后，直接打开用户程序异常，打开MVS后，再打开用户程序就正常的问题，直接引导用户添加此代码即可
```

<div align="center"><img src="https://img.jisicn.ml/img/202304271454228.jpg" width="50%" height="50%"></img></div>

## 2023-04-25 周二
`版本号: V18_230425_1213`
- 优化海康彩色相机类型错误

## 2023-03-28 周二
`版本号: V18_230328_1633`
- 更新保存OK图片，代码里打开（D:/图片文件夹——勿删/OK/A1、A2、A3……），如果没有OK文件夹内没有A1、A2、A3……可以手动创建。
## 2023-03-22 周三  
“计算两边共面度”的设定
<div align="center"><img src="https://img.jisicn.ml/img/20230322125611.png" width="20%" height="30%"></img></div>
例：两个相机分别为CCD1、CCD2
在CCD1数据里新增两个数据，“算法”为“共面度，标签为“最大值”与“最小值”以获取需要获取组的最大值与最小值数据。

在CCD2数据中，新增一个数据
算法：共面度
标签：两边共面度
参数配制（第一个）：表示获取当前CCD2组中的最大值与最小值；
数据源0（第一个）：表示获取其它相机的任务号，如CCD1为0、CCD2为1；
数据源1（第二个）数据源2（第三个）：表示CCD1中的最大与最小值所在的数据位置（编号）；

説明：通过参数配制获取当前组的最大与小值两个数据，同时设定数据源的参数获取另一个任务的最大与最小值，最大计算获取到的四个数据中的最大与最小值，计算最后的共面度。

注：在标签中打“最大值”、“最小值”、“两边共面度”时，字不要打错，不要出现多余的字符包括空格。

## 2023-03-09 周四
`版本号：V18_230309_1959`
- 优化右侧边栏报警页面任务名称，原先都是显示CCD1
## 2023-03-03 周五
`版本号：V18_230303_0846`
- 灰度及比例尺去掉默认灰度
## 2023-03-01 周三
`版本号：V18_230301_1043`
- 更新图片叠加数据显示颜色
```
参数：设置--行间距
0 黑底白字
1 白底黑字
2 绿底白字
3 白底绿字
```
## 2023-02-25 周六
`版本号：V18_230215_1046`
- 算法10.中心直线
	- 前两点：用当前算法的前两个ROI做中心直线
	- 多面（算法09）：通过MAX、MIN自定义两个点做中心直线
## 2023-02-15 周三
`版本号：V18_230215_1046`
 + 优化名称统一（显示页面计数名称、数据显示名称、图像标题名称、右上角索引名称）
 + 海康相机可以支持重复调取句柄，如单相机分两段测试，可以打开两个图像，在高级设置页面将端口号设为相同（两段不可同时测试，要有先后）
## 2023-02-12 周日
`版本号：V18_230212_2312`
 + 更新索引列表、图像标题、数据表格名称一致性
## 2023-01-02 周一
`版本号：V18_230102_1632`
- 更新四点基准，指定前任意四点（MIN、MAX、辅助4、辅助3）
注：如果要同步原来前四个点的参数。假如当前ROI为10
MIN：6
MAX：7
辅助4：8
辅助3：9

## 2022-11-11 周五
`版本号：V18_221111_1133`
 + 优化光源控制
 + 优化串口IO，补始化与设置延时分开，右键设置延时（默认为设置全部延时，“特殊命令中设置＄为设置单个延时”）


## 2022-10-31 周一
`版本号：V18_221031_0831`
 + 更新1：优化串口光源控制，优化串口初始化，简化5条指令

## 2022-10-29 周六
`版本号：`
 + 更新1：优化串口光源控制
 + 更新2：优化串口可在线修改波特率、奇偶参数；优化串口可以在线切换。
	 + 说明：在**设置**页面--鼠标右键；修改参数（在下方特殊命令处输入$9600$2，此时点切换更新参数，9600为波特率，2为偶校验）


<div align="center">
    <img src="https://i.imgur.com/Le0O6Ra.png" width="30%" height="30%"></img>
</div>


## 2022-10-28 周五
`版本号：V18_221028_0756`
 + 更新1：更新16路IO
	 + 说明：更新串口IO，16路与8路通用

## 2022-10-27 周四
`版本号：V18_221027_1159`
 + 更新1：加入系统位数设定
	 + 说明：程序根目录--config--setdate.ini

## 2022-10-24 周一
`版本号：V18_221024_1256`
 + 更新1：增加串口端口光源控制
	 + 说明：跟原先IO设置一致
		+ 参数1：9900高级页面光源端口（大于等于0，启动此端口）
		+ 参数2：拍照完成（参数1 = -1，则启用此端口）

## 2022-10-21 周五
 + 更新1：更新数据保存路径
	 + 说明：以不同**模板名**新建文件夹，数据CSV名为每个**任务名**
 + 更新2：程序左上角文件中显示EXCEL选项变更
	 + 说明：点击后，弹出当前模板数据文件夹，选择CSV数据文件自动打开

## 2022-10-18
1. 更新右上角的索引名称
	+ 修改位置，高级页面，相机备注，索引10开始，10对应原CCD1……
	+ 更改MODBUS启动读取“继存器”
2. 更新到处数据为CSV，格式为 “模版处+任务名”

## 2022-09-28
1. 更新海康CU相机（之前CA相机型号换到CU，所加对海康相机的过滤失效）

## 2022年09月23日 23:26:51
> V18.220923.2326

1. 更新自由协议RS232，新增设置--参数页面右键菜单如下
	串口初始化
	设置延时
	全部ON/OFF

串口初始化：新卡必须点一次，初始化时可以调整“IO发送延时”初始化过程中会同时设置延时时间
设置延时：在下面新增“特殊命令”框中输入如 01$500 为单独设置Y1延时时间500ms自动断开    如 02$100 设置Y2输出延时为100ms断开

>　注：点“设置延时”过后，命令行字符可以继续修改下一个


<div align="center">
    <img src="https://i.imgur.com/GzpAV31.png" width="20%" height="20%"></img></div>

## 2022年09月17日 07:21:00
> 版本号：V18.220917.0658

1. 更新当打开HIK相机打开，避免占用其它牌子相机

## 2022年09月12日 23:32:20
>版本号：V18.220912.2332
1. 加入MP351 IO卡

## 2022年09月06日 16:12:58
>版本号：V18.220906.1603

1. 更新触发干扰，在设置--参数页，起始值改成10000开启。读取次数为起始设定值-10000，如10003-10000=3，表示读3次，3次都读到正常信号为正常，其它有一次没读到判定为干扰。
2. 增加输出信号取反，设定在用户输入“9900”弹出高组页面中“取反”打勾

## 2022年09月06日 11:04:42 
> **版本号：V18.220906.1058**
1. 更新比例尺灰色
2. 补尝值增加范围设定；设定位置为用户输入“9900”弹出高级页面中相机备注，索引0，上限，下限设定
3. 批量校验选项关闭：设定位置为用户输入“9900”弹出高级页面中相机备注，索引1，输入“批量校验关闭”

## 2022年08月06日 07:38:03

+ 鼎力“开瓶器”算法
	1. 算法 “点面积” ROI标识设为 “开瓶器” 打开，辅助5设为100（用圆搜索面积）。
	2. 算法 “两点一线” 辅助5设为1000获取上一步得到的两个点。 
- 手动基准线
	- 辅助4 控制颜色 0-4
	- 辅助3 控制线宽

## 2022年07月28日 10:41:52 
> 版本号：V18.220728.1111
- 更新两点一线基准，使用15号算法实现 **Y基准**
	- 步骤：
		1.算法选 **“两点一线”**
		2.扫描方向选 **“多面（算法09）”**
		3.MAX设定第一个基准点，MIN设定第二个基准点
		4.辅助5设定 **500**
- 注：15号算法中扫描方向用 **上到下**或 **下到上**，设定左右点用辅助3来实现，辅助3为0时抓左右中心，为1时抓左边，为2时抓右边。

## 2022年07月06日 17:27:18
- 新增ROI“33.图像镜像”
	- 参数1，**辅助5**为 **1** 时打开，默认关闭。
	- 参数2，**Average**为 **0** 时，上下镜像；为 **1** 时左右镜像；为 **2** 时中心镜像
- 新增ROI”34.图像裁切“
	- 参数1，ROI框，裁切出ROI框内图像
	- 参数2，**辅助5**为 **1** 时打开，默认关闭。

## 2022年07月06日 旋转，可选水平或竖直
- ROI算法“旋转”
- 默认相对水平旋转
- 辅助5为100时，相对竖直旋转

例：
1. ROI1画圆抓圆心
2. ROI2用09多面，抓取中心
3. ROI3用旋转，前两点，辅助5设为100

- 更新：取消前两点，改为手动指定任意两点，MIN为点1，MAX为点2

## 2022年07月05日 直通率过低时计数显示红色
- 更新直通率计数显示红色字体
- 开关：右侧--设置--参数--直通率值设定（>0生效，=0不启动）
- 默认参数灰色不能设定，设置页下方有个密码登录框，右上角打勾，密码默认“123”，确定后可以修改直通率设定值。

## 2022年06月12日 22:02:45 串口数据，产品为空时发送“99999”
- 串口发送数据时，空产品，发送数据“99999”
- 配制：数据--点面积--数据源（将“数据源改成-10”）

## 2022年06月10日 无产品时强制OK
- 更新无产品时强制OK
	-	方法：
		1. 新增ROI，用点面积算法汇制无产品测试框，并设置好参数。
		2. 在数据中新增数据，算法为点面积，参数与平常一致，设置好效果使有产品时OK，无产品时NG。
		3. 最后，在数据中将**数据源**改成-20

注：每次程序运行到此数据时，强制OK，请小心设置，另外建议将此数据放在**数据**中第一个（放其它位置也可以用，如果放在第1位，当NG时，后面数据将不会检测。）


## 2022年05月11日 优化旋转
- 相机参数页**图像旋转角度**（用C代表）C ≥1000开启（防止被误操作），实际旋转角度为C -1000，如旋转90度， C=1090即可。


## 2022-04-19 更新ROI 16 多项数据
- 更新ROI 16 多项数据
	- 已经支持算法
		1. 算法15，平整度及间距（面积）
			- 打开：在多项数据ROI参数下的**辅助3**输入“15”
		 1. 算法09，多面计算
			- 打开：在多项数据ROI参数下的**辅助3**输入“09”
			- 数据：默认支持两组
				- 第1组基准线：**参数配制**索引基准点A，**参数配制1**索引基准点B，计算时程序以AB为基准。
				- 第1组范围：对应下面第一个标准及正负公关。
				- 第2组基准线：**数据源**索引基准点C，**数据源1**索引基准点D，计算时程序以CD为基准。
				- 第2组范围：对应下面第二个标准及正负公关（有的版本显示正位度公差）。


## 2022-04-09 优化海康相机
- 优化海康相机驱动调用（在VI模式下运行正常，当打包EXE后连不dll库。最手功指定路径解觉问题。猜测是，默认库文件识别64位，所以加载失败）

## 2022-04-06
- 更新可用15#算法来作定位
- 优化海康相机驱动



- [ ] 123
- [x] 456




---
## 其它备注：

---


## ----------------------------------更新步骤-----------------------------------
~~~
1. 回到WINDOWS桌面
2. 鼠标移到CCD程序的图标上，点右键，选“打开文件位置”，此时便打开程序根目录
3. 打开下载的压缩更新文件
4. 将压缩包的所有文件用鼠标拖动到软件根目录
5. 在弹出的确认框中点“移动并替换”
6. 更新完成。
~~~
## ----------------------------------重要更新-----------------------------------
12月份之后的更新文件升级12月份之前的程序，如果升级完后不能打开，需从网盘下载大恒及海康最新驱动并安装。

~~~
网盘地址可以加公众号：JISI    
发送CCD获取。
~~~

~~~
1. 大恒：云盘--常用软件--驱动--Daheng--Galaxy_Windows_CN_32bits-64bits_1.12.2107.9211.rar
2. 海康：云盘--常用软件--驱动--HIK--MVS_STD_2.2.3_170728.rar
~~~


---

返回[[索引/索引\|索引]]



